# Infinity Storage

Infinity Storage — це рішення для самостійного хостингу, яке використовує Telegram як бекенд для необмеженого зберігання файлів. Воно надає простий API для завантаження, скачування та керування вашими файлами.

## Як це працює

Коли ви завантажуєте файл, він розбивається на частини по 20 МБ і відправляється у вказаний чат або канал Telegram. Метадані файлу (включаючи ідентифікатори файлів Telegram для кожної частини) зберігаються в локальній базі даних SQLite. Коли ви запитуєте файл, програма отримує частини з Telegram і передає їх вам.

## Особливості

-   **Необмежене сховище:** Використовуйте щедрі ліміти Telegram на зберігання файлів.
-   **Простий API:** Простий у використанні API для керування файлами.
-   **Власний хостинг:** Ви маєте повний контроль над своїми даними.
-   **Потокова передача:** Файли передаються потоково як при завантаженні, так і при скачуванні, що ефективно використовує пам'ять.

## Початок роботи

### Передумови

-   Go 1.22 або новіший
-   Токен Telegram бота. Ви можете отримати його у [BotFather](https://t.me/BotFather).
-   ID чату або каналу, де будуть зберігатися файли.

### Встановлення

1.  Клонуйте репозиторій:
    ```bash
    git clone https://github.com/ZaViBiS/infinity-storage.git
    cd infinity-storage
    ```

2.  Створіть файл `.env` у корені проекту та додайте токен вашого Telegram бота та ID чату:
    ```
    TOKEN=ВАШ_ТОКЕН_ТЕЛЕГРАМ_БОТА
    CHATID=ІДЕНТИФІКАТОР_ВАШОГО_ТЕЛЕГРАМ_ЧАТУ
    ```

3.  Зберіть та запустіть застосунок:
    ```bash
    go build .
    ./infinity-storage
    ```

Сервер буде запущено на порті `8081`.

## Документація API

### Автентифікація

Для автентифікації надайте ваш API ключ у заголовку `Authorization` як токен Bearer або у заголовку `X-API-Key`.

**Приклад:**
`Authorization: Bearer ВАШ_API_КЛЮЧ`
або
`X-API-Key: ВАШ_API_КЛЮЧ`

### Ендпоінти

#### `GET /get_api_key`

Генерує новий унікальний API ключ.

**Відповідь:**
```json
{
  "key": "ВАШ_API_КЛЮЧ"
}
```

#### `POST /upload`

Завантажує файл. Файл має бути надісланий як `multipart/form-data` запит.

**Запит:**
```bash
curl -X POST http://localhost:8081/upload \
  -H "Authorization: Bearer ВАШ_API_КЛЮЧ" \
  -F "file=@/шлях/до/вашого/файлу.jpg"
```

**Відповідь:**
-   `202 Accepted`: Завантаження файлу прийнято та обробляється.

#### `GET /list`

Отримує список усіх завантажених файлів для автентифікованого API ключа.

**Запит:**
```bash
curl -X GET http://localhost:8081/list \
  -H "Authorization: Bearer ВАШ_API_КЛЮЧ"
```

**Відповідь:**
```json
{
  "files": [
    {
      "ID": 1,
      "FileName": "приклад.jpg",
      "Size": 123456,
      "UploadDate": "2025-12-31T12:00:00Z",
      "TotalChunks": 1
    }
  ]
}
```

#### `GET /get_file`

Завантажує файл за його ID.

**Запит:**
```bash
curl -X GET "http://localhost:8081/get_file?file_id=1" \
  -H "Authorization: Bearer ВАШ_API_КЛЮЧ" \
  --output завантажений_файл.jpg
```

**Відповідь:**
-   Сирі дані файлу.

## TODO

-   [ ] Шифрування
-   [ ] Стиснення
-   [ ] Видалення файлу